<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Hands on lab to deploy Event Streams on OpenShift"><meta name=author content="Jerome Boyer"><link href=https://ibm-cloud-architecture.github.com/refarch-eda/technology/event-streams/es-cp4i/ rel=canonical><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>Event Streams within Cloud Pak for Integration - IBM Automation - Event-driven Solution - Sharing knowledge</title><link rel=stylesheet href=../../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prerequisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="IBM Automation - Event-driven Solution - Sharing knowledge" class="md-header__button md-logo" aria-label="IBM Automation - Event-driven Solution - Sharing knowledge" data-md-component=logo> <img src=../../../images/es-icon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> IBM Automation - Event-driven Solution - Sharing knowledge </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Event Streams within Cloud Pak for Integration </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm-cloud-architecture/refarch-eda title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> ibm-cloud-architecture/refarch-eda </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="IBM Automation - Event-driven Solution - Sharing knowledge" class="md-nav__button md-logo" aria-label="IBM Automation - Event-driven Solution - Sharing knowledge" data-md-component=logo> <img src=../../../images/es-icon.png alt=logo> </a> IBM Automation - Event-driven Solution - Sharing knowledge </label> <div class=md-nav__source> <a href=https://github.com/ibm-cloud-architecture/refarch-eda title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> ibm-cloud-architecture/refarch-eda </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../news/ class=md-nav__link> What's new </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Introduction <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Introduction data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../introduction/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../introduction/reference-architecture/ class=md-nav__link> Reference Architecture </a> </li> <li class=md-nav__item> <a href=../../../introduction/usecases/ class=md-nav__link> Business Use Cases </a> </li> <li class=md-nav__item> <a href=../../../introduction/target-audiences/ class=md-nav__link> Target Audiences </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Learning Journey <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Learning Journey" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Learning Journey </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../journey/101/ class=md-nav__link> Get started (101 content) </a> </li> <li class=md-nav__item> <a href=../../../journey/201/ class=md-nav__link> Deeper dive (201 content) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../concepts/terms-and-definitions/ class=md-nav__link> Terms & Definitions </a> </li> <li class=md-nav__item> <a href=../../../concepts/integration/ class=md-nav__link> Agile Integration </a> </li> <li class=md-nav__item> <a href=../../../concepts/events-versus-messages/ class=md-nav__link> Event streaming versus Queuing </a> </li> <li class=md-nav__item> <a href=../../../concepts/fit-to-purpose/ class=md-nav__link> Fit for purpose </a> </li> <li class=md-nav__item> <a href=../../../concepts/model/ class=md-nav__link> Devising the data models </a> </li> <li class=md-nav__item> <a href=../../../concepts/flow-architectures/ class=md-nav__link> Flow Architecture </a> </li> <li class=md-nav__item> <a href=../../../concepts/service-mesh/ class=md-nav__link> Service mesh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Advantages of EDA <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advantages of EDA" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Advantages of EDA </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advantages/microservice/ class=md-nav__link> Microservice decoupling </a> </li> <li class=md-nav__item> <a href=../../../advantages/reactive/ class=md-nav__link> Reactive systems </a> </li> <li class=md-nav__item> <a href=../../../advantages/resiliency/ class=md-nav__link> Resiliency </a> </li> <li class=md-nav__item> <a href=../../../advantages/scalability/ class=md-nav__link> Scalability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Patterns in EDA <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Patterns in EDA" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Patterns in EDA </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../patterns/intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../patterns/event-sourcing/ class=md-nav__link> Event Sourcing </a> </li> <li class=md-nav__item> <a href=../../../patterns/cqrs/ class=md-nav__link> CQRS </a> </li> <li class=md-nav__item> <a href=../../../patterns/saga/ class=md-nav__link> Saga </a> </li> <li class=md-nav__item> <a href=../../../patterns/dlq/ class=md-nav__link> Dead Letter Queue </a> </li> <li class=md-nav__item> <a href=../../../patterns/topic-replication/ class=md-nav__link> Topic Replication </a> </li> <li class=md-nav__item> <a href=../../../patterns/data-pipeline/ class=md-nav__link> Data Intensive App </a> </li> <li class=md-nav__item> <a href=../../../patterns/realtime-analytics/ class=md-nav__link> Near real-time analytics </a> </li> <li class=md-nav__item> <a href=../../../patterns/api-mgt/ class=md-nav__link> API management </a> </li> <li class=md-nav__item> <a href=../../../patterns/cep/ class=md-nav__link> Situational decision </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Methodology <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Methodology data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Methodology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../methodology/event-storming/ class=md-nav__link> Event Storming </a> </li> <li class=md-nav__item> <a href=../../../methodology/domain-driven-design/ class=md-nav__link> Domain-Driven Design </a> </li> <li class=md-nav__item> <a href=../../../methodology/data-intensive/ class=md-nav__link> Data Intensive App Development </a> </li> <li class=md-nav__item> <a href=../../../methodology/data-lineage/ class=md-nav__link> Data lineage </a> </li> <li class=md-nav__item> <a href=../../../methodology/governance/ class=md-nav__link> Governance </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> Technology <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Technology data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Technology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kafka-overview/ class=md-nav__link> Kafka Overview </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> Event Streams </a> </li> <li class=md-nav__item> <a href=https://ibm-cloud-architecture.github.io/eda-tech-academy/demo/ class=md-nav__link> Event Streams Demo Script </a> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> Kafka FAQ </a> </li> <li class=md-nav__item> <a href=../../mq/ class=md-nav__link> MQ in EDA context </a> </li> <li class=md-nav__item> <a href=../../kafka-producers/ class=md-nav__link> Kafka Producers </a> </li> <li class=md-nav__item> <a href=../../kafka-consumers/ class=md-nav__link> Kafka Consumers </a> </li> <li class=md-nav__item> <a href=../../avro-schemas/ class=md-nav__link> Avro Schema </a> </li> <li class=md-nav__item> <a href=../../advanced-kafka/ class=md-nav__link> Advanced Concepts </a> </li> <li class=md-nav__item> <a href=../../kafka-streams/ class=md-nav__link> Kafka Streams </a> </li> <li class=md-nav__item> <a href=../../kafka-connect/ class=md-nav__link> Kafka Connect </a> </li> <li class=md-nav__item> <a href=../es-maas/security/ class=md-nav__link> Kafka security </a> </li> <li class=md-nav__item> <a href=../../kafka-monitoring/ class=md-nav__link> Kafka Monitoring </a> </li> <li class=md-nav__item> <a href=../../kafka-mirrormaker/ class=md-nav__link> Mirror Maker 2 </a> </li> <li class=md-nav__item> <a href=../../security/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../flink/ class=md-nav__link> Apache Flink </a> </li> <li class=md-nav__item> <a href=../../spring/ class=md-nav__link> Spring cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10 checked> <label class=md-nav__link for=__nav_10> Use Cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Use Cases" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Use Cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../use-cases/gitops/ class=md-nav__link> Event-driven solution GitOps </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Deploy Event-Streams <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Deploy Event-Streams </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> <nav class=md-nav aria-label=Prerequisites> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-cloudctl-clis class=md-nav__link> Install Cloudctl CLIs </a> </li> <li class=md-nav__item> <a href=#install-ibm-catalog class=md-nav__link> Install IBM catalog </a> </li> <li class=md-nav__item> <a href=#get-ibm-software-entitlement-key-and-create-a-secret class=md-nav__link> Get IBM Software entitlement key and create a secret </a> </li> <li class=md-nav__item> <a href=#install-ibm-foundational-services class=md-nav__link> Install IBM foundational services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-event-streams-using-openshift-console class=md-nav__link> Install Event Streams Using OpenShift Console </a> <nav class=md-nav aria-label="Install Event Streams Using OpenShift Console"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-users-and-teams class=md-nav__link> Adding users and teams </a> </li> <li class=md-nav__item> <a href=#log-into-event-streams class=md-nav__link> Log into Event Streams </a> </li> <li class=md-nav__item> <a href=#create-event-streams-topics class=md-nav__link> Create Event Streams Topics </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-starter-application class=md-nav__link> Run starter application </a> </li> <li class=md-nav__item> <a href=#install-event-streams-using-clis class=md-nav__link> Install Event Streams Using CLIs </a> </li> <li class=md-nav__item> <a href=#oc-apply-k-cp4i-operatorsevent-streamsinstancesprod-small class=md-nav__link> oc apply -k cp4i-operators/event-streams/instances/prod-small/ </a> </li> <li class=md-nav__item> <a href=#common-operations-to-perform-on-cluster class=md-nav__link> Common operations to perform on cluster </a> <nav class=md-nav aria-label="Common operations to perform on cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#download-es-cli-plugin class=md-nav__link> Download ES CLI plugin </a> </li> <li class=md-nav__item> <a href=#access-to-event-streams-console-using-cli class=md-nav__link> Access to Event Streams Console using CLI </a> </li> <li class=md-nav__item> <a href=#create-topic-with-es-cli class=md-nav__link> Create Topic with es CLI </a> </li> <li class=md-nav__item> <a href=#get-kafka-bootstrap-url class=md-nav__link> Get Kafka Bootstrap Url </a> <nav class=md-nav aria-label="Get Kafka Bootstrap Url"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli class=md-nav__link> CLI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#generate-scram-service-credentials class=md-nav__link> Generate SCRAM Service Credentials </a> <nav class=md-nav aria-label="Generate SCRAM Service Credentials"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui_1 class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli_1 class=md-nav__link> CLI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#get-event-streams-tls-certificates class=md-nav__link> Get Event Streams TLS Certificates </a> <nav class=md-nav aria-label="Get Event Streams TLS Certificates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui_2 class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli_2 class=md-nav__link> CLI </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../use-cases/connect-s3/ class=md-nav__link> Kafka Connect - S3 </a> </li> <li class=md-nav__item> <a href=../../../use-cases/connect-cos/ class=md-nav__link> Kafka Connect - COS </a> </li> <li class=md-nav__item> <a href=../../../use-cases/connect-jdbc/ class=md-nav__link> Kafka Connect - jdbc </a> </li> <li class=md-nav__item> <a href=../../../use-cases/connect-mq/ class=md-nav__link> Kafka Connect - MQ </a> </li> <li class=md-nav__item> <a href=../../../use-cases/connect-rabbitmq/ class=md-nav__link> Kafka Connect - Rabbitmq </a> </li> <li class=md-nav__item> <a href=../../../use-cases/kafka-streams/ class=md-nav__link> Kafka Streams labs </a> </li> <li class=md-nav__item> <a href=../../../use-cases/db2-debezium/ class=md-nav__link> DB2 - CDC Debezium - Outbox </a> </li> <li class=md-nav__item> <a href=../../../use-cases/kafka-mm2/ class=md-nav__link> Mirror maker 2 labs </a> </li> <li class=md-nav__item> <a href=../../../use-cases/schema-registry-on-cloud/ class=md-nav__link> Schema registry ES on Cloud </a> </li> <li class=md-nav__item> <a href=../../../use-cases/schema-registry-on-ocp/ class=md-nav__link> Schema registry </a> </li> <li class=md-nav__item> <a href=../../../use-cases/monitoring-on-cloud/ class=md-nav__link> Monitoring ES on Cloud </a> </li> <li class=md-nav__item> <a href=../../../use-cases/monitoring-on-ocp/ class=md-nav__link> Monitoring ES </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11> Scenarios <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Scenarios data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Scenarios </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../scenarios/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=https://ibm-cloud-architecture.github.io/refarch-kc/ class=md-nav__link> Reefer Shipment Solution </a> </li> <li class=md-nav__item> <a href=https://ibm-cloud-architecture.github.io/vaccine-solution-main/ class=md-nav__link> Vaccine at Scale </a> </li> <li class=md-nav__item> <a href=https://ibm-cloud-architecture.github.io/eda-rt-inventory-gitops class=md-nav__link> Near real-time Inventory </a> </li> <li class=md-nav__item> <a href=../../../scenarios/saga-orchestration/ class=md-nav__link> SAGA with MQ Orchestration </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../additional-reading/ class=md-nav__link> Additional reading </a> </li> <li class=md-nav__item> <a href=../../../contribute/ class=md-nav__link> Contribute to this Site </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> <nav class=md-nav aria-label=Prerequisites> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-cloudctl-clis class=md-nav__link> Install Cloudctl CLIs </a> </li> <li class=md-nav__item> <a href=#install-ibm-catalog class=md-nav__link> Install IBM catalog </a> </li> <li class=md-nav__item> <a href=#get-ibm-software-entitlement-key-and-create-a-secret class=md-nav__link> Get IBM Software entitlement key and create a secret </a> </li> <li class=md-nav__item> <a href=#install-ibm-foundational-services class=md-nav__link> Install IBM foundational services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-event-streams-using-openshift-console class=md-nav__link> Install Event Streams Using OpenShift Console </a> <nav class=md-nav aria-label="Install Event Streams Using OpenShift Console"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-users-and-teams class=md-nav__link> Adding users and teams </a> </li> <li class=md-nav__item> <a href=#log-into-event-streams class=md-nav__link> Log into Event Streams </a> </li> <li class=md-nav__item> <a href=#create-event-streams-topics class=md-nav__link> Create Event Streams Topics </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-starter-application class=md-nav__link> Run starter application </a> </li> <li class=md-nav__item> <a href=#install-event-streams-using-clis class=md-nav__link> Install Event Streams Using CLIs </a> </li> <li class=md-nav__item> <a href=#oc-apply-k-cp4i-operatorsevent-streamsinstancesprod-small class=md-nav__link> oc apply -k cp4i-operators/event-streams/instances/prod-small/ </a> </li> <li class=md-nav__item> <a href=#common-operations-to-perform-on-cluster class=md-nav__link> Common operations to perform on cluster </a> <nav class=md-nav aria-label="Common operations to perform on cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#download-es-cli-plugin class=md-nav__link> Download ES CLI plugin </a> </li> <li class=md-nav__item> <a href=#access-to-event-streams-console-using-cli class=md-nav__link> Access to Event Streams Console using CLI </a> </li> <li class=md-nav__item> <a href=#create-topic-with-es-cli class=md-nav__link> Create Topic with es CLI </a> </li> <li class=md-nav__item> <a href=#get-kafka-bootstrap-url class=md-nav__link> Get Kafka Bootstrap Url </a> <nav class=md-nav aria-label="Get Kafka Bootstrap Url"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli class=md-nav__link> CLI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#generate-scram-service-credentials class=md-nav__link> Generate SCRAM Service Credentials </a> <nav class=md-nav aria-label="Generate SCRAM Service Credentials"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui_1 class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli_1 class=md-nav__link> CLI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#get-event-streams-tls-certificates class=md-nav__link> Get Event Streams TLS Certificates </a> <nav class=md-nav aria-label="Get Event Streams TLS Certificates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ui_2 class=md-nav__link> UI </a> </li> <li class=md-nav__item> <a href=#cli_2 class=md-nav__link> CLI </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm-cloud-architecture/refarch-eda/edit/master/docs/technology/event-streams/es-cp4i/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Deploy Event-Streams</h1> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Updated 10/03/2022 </p> </div> <p>In this tutorial you will learn how to install Event Streams on OpenShift, using a the Administration Console, or using CLI. We propose two installation tutorials: </p> <ul> <li>one using the OpenShift Admin console, then the Event Streams console to create Kafka topics and use the Starter Application, to validate the installation.</li> <li>one using <code>oc CLI</code> from your terminal or from Cloud Shell Terminal.</li> </ul> <p>The Kafka Cluster configuration is for a development or staging environment with no persistence.</p> <p>Once the installation is successful, the final pods running in the <code>eventstreams</code> project are:</p> <p><code>sh dev-entity-operator-69c6b7cf87-bfxbw 2/2 Running 0 43s dev-kafka-0 1/1 Running 0 2m dev-kafka-1 1/1 Running 0 2m dev-kafka-2 1/1 Running 0 2m dev-zookeeper-0 1/1 Running 0 2m46s dev-zookeeper-1 1/1 Running 0 3h23m dev-zookeeper-2 1/1 Running 0 3h23m</code></p> <p><strong>Updated October 07/2021 - Operator Release 2.4 - Product Release 10.4 - Kafka 2.8</strong></p> <p>We recommend to read the following <a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.2?topic=installation-structuring-your-deployment">"structuring your deployment" chapter from product documentation</a> to give you more insight of the things to consider for deployment. </p> <p>In this tutorial we select to deploy Event Streams in one namespace, and the Operator to monitor multiple namespaces.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ul> <li>Get access to an OpenShift Cluster.</li> <li>Get <code>oc</code> CLI from OpenShift Admin Console</li> </ul> <h3 id=install-cloudctl-clis>Install Cloudctl CLIs<a class=headerlink href=#install-cloudctl-clis title="Permanent link">&para;</a></h3> <ul> <li> <p>Install IBM Cloud Pak CLI: Cloudctl is a command line tool to manage Container Application Software for Enterprises (CASEs). This CLI will allow us to manage Cloud Pak related components as well as software, like IBM Event Streams, installed through any IBM Cloud Pak. In order to install it, execute the following commands in your IBM Cloud Shell:</p> </li> <li> <p>Download the IBM Cloud Pak CLI (example below is for Mac but other downloads are <a href=https://github.com/IBM/cloud-pak-cli/releases/tag/v3.12.0>available here</a>): </p> </li> </ul> <p><div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>curl -L https://github.com/IBM/cloud-pak-cli/releases/latest/download/cloudctl-darwin-amd64.tar.gz -o cloudctl.tar.gz
</code></pre></div> * Untar it</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>tar -xvf cloudctl.tar.gz
</code></pre></div> <ul> <li>Rename it as cloudctl and move to a folder within your PATH:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>mv cloudctl-darwin-amd64 cloudctl
</code></pre></div> <ul> <li>Make sure your IBM Cloud Pak CLI is in the path: <code>which cloudctl</code></li> <li>Make sure your IBM Cloud Pak CLI works: <code>cloudctl help</code></li> </ul> <p><img alt=shell2 src=images/shell2-v10.png></p> <p>See also the product documentation for <a href=https://ibm.github.io/event-streams/installing/prerequisites/ >prerequisites details</a></p> <h3 id=install-ibm-catalog>Install IBM catalog<a class=headerlink href=#install-ibm-catalog title="Permanent link">&para;</a></h3> <p>Use the EDA Gitops project with the different operator subscriptions and IBM catalog to define the IBM Operator catalog.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># List existing catalog</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>oc get catalogsource -n openshift-marketplace
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=c1># Verifi ibm-operator-catalog is present in the list</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1># if not add IBM catalog </span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>oc apply -f https://raw.githubusercontent.com/ibm-cloud-architecture/eda-gitops-catalog/main/ibm-catalog/catalog_source.yaml
</code></pre></div> <h3 id=get-ibm-software-entitlement-key-and-create-a-secret>Get IBM Software entitlement key and create a secret<a class=headerlink href=#get-ibm-software-entitlement-key-and-create-a-secret title="Permanent link">&para;</a></h3> <ul> <li>Obtain <a href=https://github.com/IBM/cloudpak-gitops/blob/main/docs/install.md#obtain-an-entitlement-key>IBM license entitlement key</a>.</li> <li> <p>Verify you can access the IBM Image repository with</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>docker login cp.icr.io --username cp --password &lt;key-copied&gt;
</code></pre></div> </li> <li> <p>Create a OpenShift secret in the <code>openshift-operator</code> project </p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Get on good project</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>oc project openshift-operators
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1># Verify if secret exists</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>oc describe secret ibm-entitlement-key
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=c1># Create if needed</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>oc create secret docker-registry ibm-entitlement-key <span class=se>\</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    --docker-username<span class=o>=</span>cp <span class=se>\</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    --docker-server<span class=o>=</span>cp.icr.io <span class=se>\</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>    --namespace<span class=o>=</span>eventstreams <span class=se>\</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    --docker-password<span class=o>=</span>your_entitlement_key 
</code></pre></div> </li> </ul> <blockquote> <p>Attention This secret needs to be present in any namespace where an Event Streams cluster will be deployed.</p> </blockquote> <h3 id=install-ibm-foundational-services>Install IBM foundational services<a class=headerlink href=#install-ibm-foundational-services title="Permanent link">&para;</a></h3> <p>When using security with IAM and other services, Event Streams needs IBM foundations services. It will install it automatically if you install the operator at the cluster level. In case you need to control the deployment and if <em>Cloud Pak for Integration</em> is not installed yet, you need to install the IBM foundational services operator for that, follow these <a href="https://www.ibm.com/docs/en/cpfs?topic=311-installing-foundational-services-by-using-console">simple instructions</a>.</p> <p>Create the same ibm-entitlement-key in the <code>ibm-common-services</code> namespace.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># verify operator installed</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>oc get operators -n ibm-common-services
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=c1># -&gt; response:</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>ibm-common-service-operator.openshift-operators    
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>ibm-namespace-scope-operator.ibm-common-services   
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>ibm-odlm.ibm-common-services                       
</code></pre></div> <p>Those are the deployments the foundational services are creating:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>ibm-common-service-webhook             1/1     1            1           68m
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>ibm-namespace-scope-operator           1/1     1            1           69m
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>operand-deployment-lifecycle-manager   1/1     1            1           68m
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>secretshare                            1/1     1            1           68m
</code></pre></div> <p>Recalls that operands are what operators manage. </p> <hr> <h2 id=install-event-streams-using-openshift-console>Install Event Streams Using OpenShift Console<a class=headerlink href=#install-event-streams-using-openshift-console title="Permanent link">&para;</a></h2> <ul> <li> <p>As Cluster Administrator, create a project using Home &gt; Projects, and create button, and enter <code>eventstreams</code> as project name.</p> <p><img alt src=images/create-project.png></p> </li> </ul> <p>The goal is to create a shareable Kafka cluster. </p> <ul> <li>As Administrator, use <code>Openshift console -&gt; Operators &gt; OperatorHub</code> to search for <code>Event Streams</code> operator, then install the operator by selecting the <code>All namespaces on the cluster</code>, the version v2.4. The Operator will monitor all namespaces.</li> </ul> <p><img alt src=images/es-operator-cfg.png></p> <p>The installation of this operator will also include pre-requisites operators like <code>Cloud Pak foundational services (3.11)</code></p> <ul> <li>Once the Operator is ready, go to the <code>Installed Operator</code> under the <code>eventstreams</code> project</li> </ul> <p><img alt src=images/es-operator-home.png></p> <ul> <li>Create an Event Streams cluster instance using the operator user interface:</li> </ul> <p><img alt src=images/create-es-instance.png></p> <p>Enter the minimum information for a development cluster, like name, license,.. </p> <p><img alt src=images/es-top-form.png></p> <p>Or go to the <code>Yaml view</code> and select one of the proposed Sample:</p> <p><img alt src=images/es-yaml-view.png></p> <p>The <code>Development</code> configuration should be enough to get you started. For production deployment <a href=/technology/event-streams/es-cp4i/es-production/ >see this article</a>.</p> <p>Do not forget to set <code>spec.license.accept</code> to true.</p> <p>Before creating the instance, we recommend you read <a href=/technology/security/ >the security summary</a> so you can relate the authentication configured by default with what application needs to use to connect to the Kafka cluster. For example the following declaration stipulates to use TLS authentication for internal communication, and SCRAM for external connection.</p> <div class=highlight><pre><span></span><code>```yaml
    listeners:
      plain:
        port: 9092
        type: internal
        tls: false
      external:
        authentication:
          type: scram-sha-512
        type: route
      tls:
        authentication:
          type: tls
```
</code></pre></div> <p>The first deployment of Event Streams, there may be creation of new deployments into the <code>ibm-common-services</code> if those services were not present before. Here is the updated list of <code>ibm-common-services</code> deployments:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>auth-idp                               <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           27m
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>auth-pap                               <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>auth-pdp                               <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>cert-manager-cainjector                <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>cert-manager-controller                <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>cert-manager-webhook                   <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           30m
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>common-web-ui                          <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           20m
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>configmap-watcher                      <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>default-http-backend                   <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>iam-policy-controller                  <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>ibm-cert-manager-operator              <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>ibm-common-service-webhook             <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           3h12m
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>ibm-commonui-operator                  <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>ibm-iam-operator                       <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           33m
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a>ibm-ingress-nginx-operator             <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>ibm-management-ingress-operator        <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           33m
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a>ibm-mongodb-operator                   <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>ibm-monitoring-grafana                 <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>ibm-monitoring-grafana-operator        <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           33m
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>ibm-namespace-scope-operator           <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           3h12m
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>ibm-platform-api-operator              <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>management-ingress                     <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           23m
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a>nginx-ingress-controller               <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>oidcclient-watcher                     <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a>operand-deployment-lifecycle-manager   <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           3h11m
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a>platform-api                           <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           31m
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>secret-watcher                         <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           32m
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>secretshare                            <span class=m>1</span>/1     <span class=m>1</span>            <span class=m>1</span>           3h12m
</code></pre></div> <p>It could take few minutes to get these pods up and running.</p> <p>The result of this cluster creation should looks like: </p> <p><img alt src=images/es-created.png></p> <p>with the list of pod as illustrated at the top of this article.</p> <p>See also <a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.2?topic=installing-overview-installation">Cloud Pak for integration documentation</a> for other deployment considerations.</p> <h3 id=adding-users-and-teams>Adding users and teams<a class=headerlink href=#adding-users-and-teams title="Permanent link">&para;</a></h3> <p>You need to be a platform administrator to create users and teams in IAM.</p> <p>To get the admin user credential, use the following command:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>oc get secret platform-auth-idp-credentials -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.data.admin_password}&#39;</span> -n ibm-common-services <span class=p>|</span> base64 <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&quot;&quot;</span>
</code></pre></div> <h3 id=log-into-event-streams>Log into Event Streams<a class=headerlink href=#log-into-event-streams title="Permanent link">&para;</a></h3> <p>You can get the User Interface end point by doing the following command.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>oc get route dev-ibm-es-ui -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.host}&#39;</span>
</code></pre></div> <blockquote> <p>Change <code>dev</code> prefix with the name of your Kafka cluster you defined earlier.</p> </blockquote> <p>Or using the Admin Console </p> <ul> <li>Select the Event Streams Operator in the project where you install it</li> <li>Select Click on the IBM Event Streams Operator and then on the <code>Event Streams</code> option listed at the top bar</li> <li>Click on the IBM Event Streams cluster instance you want to access to its console and see the <code>Admin UI</code> attribute that displays the route to this IBM Event Streams instance's console. <img alt=log src=images/admin-ui-url.png></li> <li>Click on the route link and enter your IBM Event Streams credentials.</li> </ul> <p>Here is the Console home page:</p> <p><img alt src=images/es-console.png></p> <h3 id=create-event-streams-topics>Create Event Streams Topics<a class=headerlink href=#create-event-streams-topics title="Permanent link">&para;</a></h3> <p>This section is a generic example of the steps to proceed to define a topic with Event Streams on OpenShift. The example is to define a topic named INBOUND with 1 partition and a replica set to 3.</p> <ol> <li>Log into your IBM Event Streams instance through the UI as explained in the previous section.</li> <li>Click on the Topics option on the navigation bar on the left. </li> <li>In the topics page, click on the <code>Create topic</code> blue button on the top right corner</li> </ol> <p><img alt="Create Topic" src=images/create-topic.png></p> <ol> <li>Provide a name for your topic.</li> </ol> <p><img alt="Topic Name" src=images/inbound-topic-name.png></p> <ol> <li>Leave Partitions at 1.</li> </ol> <p><img alt=Partition src=images/partitions.png></p> <ol> <li>Depending on how long you want messages to persist you can change this.</li> </ol> <p><img alt="Message Retention" src=images/message-retention.png></p> <ol> <li>You can leave Replication Factor at the default 3.</li> </ol> <p><img alt=Replication src=images/replicas.png></p> <ol> <li>Click Create.</li> <li>Make sure the topic has been created by navigating to the topics section on the IBM Event Streams user inteface you can find an option for in the left hand side menu bar. </li> </ol> <h2 id=run-starter-application>Run starter application<a class=headerlink href=#run-starter-application title="Permanent link">&para;</a></h2> <p><a href=/technology/event-streams/starter-app>See separate note</a></p> <hr> <h2 id=install-event-streams-using-clis>Install Event Streams Using CLIs<a class=headerlink href=#install-event-streams-using-clis title="Permanent link">&para;</a></h2> <p>This section is an alternate of using OpenShift Console. We are using our GitOps catalog repository which defines the different operators and scripts we can use to install Event Streams and other services via scripts. All can be automatized with ArgoCD / OpenShift GitOps.</p> <ul> <li>Create a project to host Event Streams cluster:</li> </ul> <p><div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>oc new-project eventstreams
</code></pre></div> * Clone our eda-gitops-catalog project</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>git clone https://github.com/ibm-cloud-architecture/eda-gitops-catalog.git
</code></pre></div> * Create the <code>ibm-entitlement-key</code> secret in this project.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>oc create secret docker-registry ibm-entitlement-key <span class=se>\</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>      --docker-username<span class=o>=</span>cp <span class=se>\</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>      --docker-server<span class=o>=</span>cp.icr.io <span class=se>\</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>      --namespace<span class=o>=</span>eventstreams <span class=se>\</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>      --docker-password<span class=o>=</span>your_entitlement_key 
</code></pre></div> <ul> <li>Install Event Streams Operator subscriptions</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>oc apply -k cp4i-operators/event-streams/operator/overlays/v2.4/
</code></pre></div> <ul> <li>Install one Event Streams instance: Instances of Event Streams can be created after the Event Streams operator is installed. You can use te OpenShift console or our predefined cluster definition:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>oc apply -k cp4i-operators/event-streams/instances/dev/
</code></pre></div> <p>If you want to do the same thing for a production cluster</p> <h2 id=oc-apply-k-cp4i-operatorsevent-streamsinstancesprod-small><div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>oc apply -k cp4i-operators/event-streams/instances/prod-small/
</code></pre></div><a class=headerlink href=#oc-apply-k-cp4i-operatorsevent-streamsinstancesprod-small title="Permanent link">&para;</a></h2> <h2 id=common-operations-to-perform-on-cluster>Common operations to perform on cluster<a class=headerlink href=#common-operations-to-perform-on-cluster title="Permanent link">&para;</a></h2> <p>We list here a set of common operations to perform on top of Event Streams Cluster.</p> <h3 id=download-es-cli-plugin>Download ES CLI plugin<a class=headerlink href=#download-es-cli-plugin title="Permanent link">&para;</a></h3> <p>From Event Streams Console, go to the "Find more in the Toolbox" tile, and then select <code>IBM Event Streams command-line interface</code>, then select your target operating system:</p> <p><img alt src=images/es-cli-download.png></p> <p>Initialize the Event Streams CLI plugin (make sure you provide the namespace where your IBM Event Streams instance is installed on as the command will fail if you dont have cluster wide admin permissions)</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>$ cloudctl es init -n eventstreams
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>IBM Cloud Platform Common Services endpoint:   https://cp-console.apps.eda-sandbox.gse-ocp.net   
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>Namespace:                                     integration   
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>Name:                                          kafka   
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>IBM Cloud Pak <span class=k>for</span> Integration UI address:      https://integration-navigator-pn-integration.apps.eda-sandbox.gse-ocp.net   
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>Event Streams API endpoint:                    https://kafka-ibm-es-admapi-external-integration.apps.eda-sandbox.gse-ocp.net   
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>Event Streams API status:                      OK   
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>Event Streams UI address:                      https://kafka-ibm-es-ui-integration.apps.eda-sandbox.gse-ocp.net   
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>Apicurio Registry endpoint:                    https://kafka-ibm-es-ac-reg-external-integration.apps.eda-sandbox.gse-ocp.net   
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>Event Streams bootstrap address:               kafka-kafka-bootstrap-integration.apps.eda-sandbox.gse-ocp.net:443   
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>OK
</code></pre></div> <h3 id=access-to-event-streams-console-using-cli>Access to Event Streams Console using CLI<a class=headerlink href=#access-to-event-streams-console-using-cli title="Permanent link">&para;</a></h3> <p>In order to log into IBM Event Streams console through the CLI, we are going to use the <code>oc</code> OpenShift CLI, the <code>cloudctl</code> Cloud Pak CLI and the <code>es</code> Cloud Pak CLI plugin. </p> <p>We assume you are already logged into your OpenShift cluster.</p> <ol> <li>Get your Cloud Pak Console route (you may need cluster wide admin permissions to do so as the Cloud Pak Console is usually installed in the <code>ibm-common-services</code> namespace by the cluster admins)</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>$ oc get routes -n ibm-common-services <span class=p>|</span> grep console
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>cp-console                       cp-console.apps.eda-sandbox.gse-ocp.net                                                  icp-management-ingress           https      reencrypt/Redirect     None
</code></pre></div> <ol> <li>Log into IBM Event Streams using the Cloud Pak console route from the previous step:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>$ cloudctl login -a https://cp-console.apps.eda-sandbox.gse-ocp.net --skip-ssl-validation
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>Username&gt; user50
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>Password&gt;
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>Authenticating...
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>OK
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>Targeted account mycluster Account
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>Enter a namespace &gt; integration
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>Targeted namespace integration
<a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>
<a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>Configuring kubectl ...
<a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>Property <span class=s2>&quot;clusters.mycluster&quot;</span> unset.
<a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>Property <span class=s2>&quot;users.mycluster-user&quot;</span> unset.
<a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a>Property <span class=s2>&quot;contexts.mycluster-context&quot;</span> unset.
<a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a>Cluster <span class=s2>&quot;mycluster&quot;</span> set.
<a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a>User <span class=s2>&quot;mycluster-user&quot;</span> set.
<a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a>Context <span class=s2>&quot;mycluster-context&quot;</span> created.
<a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a>Switched to context <span class=s2>&quot;mycluster-context&quot;</span>.
<a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a>OK
<a id=__codelineno-20-23 name=__codelineno-20-23 href=#__codelineno-20-23></a>
<a id=__codelineno-20-24 name=__codelineno-20-24 href=#__codelineno-20-24></a>Configuring helm: /Users/user/.helm
<a id=__codelineno-20-25 name=__codelineno-20-25 href=#__codelineno-20-25></a>OK
</code></pre></div> <h3 id=create-topic-with-es-cli>Create Topic with es CLI<a class=headerlink href=#create-topic-with-es-cli title="Permanent link">&para;</a></h3> <ol> <li>Create the topic with the desi specification.</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>cloudctl es topic-create --name INBOUND --partitions <span class=m>1</span> --replication-factor <span class=m>3</span>
</code></pre></div> <ol> <li>Make sure the topic has been created by listing the topics.</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>$ cloudctl es topics
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>Topic name   
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>INBOUND   
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>OK
</code></pre></div> <h3 id=get-kafka-bootstrap-url>Get Kafka Bootstrap Url<a class=headerlink href=#get-kafka-bootstrap-url title="Permanent link">&para;</a></h3> <p>For an application to access the Kafka Broker, we need to get the bootstrap URL.</p> <h4 id=ui>UI<a class=headerlink href=#ui title="Permanent link">&para;</a></h4> <p>You can find your IBM Event Streams Kakfa bootstrap url if you log into the IBM Event Streams user interface, and click on the <code>Connect to this cluster</code> option displayed on the dashboard. This will display a menu where you will see a url to the left of the <code>Generate SCAM credentials</code> button. Make sure that you are on the <strong>External Connection</strong>.</p> <p><img alt="Connect to this Cluster bootstrap" src=images/esv10-connect-to-cluster-bootstrap.png></p> <h4 id=cli>CLI<a class=headerlink href=#cli title="Permanent link">&para;</a></h4> <p>You can find your IBM Event Streams and Kakfa bootstrap url when you init the IBM Event Streams Cloud Pak CLI plugin on the last line:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>$ cloudctl es init -n eventstreams
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>IBM Cloud Platform Common Services endpoint:   https://cp-console.apps.eda-sandbox-delta.gse-ocp.net   
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>Namespace:                                     integration   
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>Name:                                          kafka   
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>IBM Cloud Pak <span class=k>for</span> Integration UI address:      https://integration-navigator-pn-integration.apps.eda-sandbox-delta.gse-ocp.net   
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>Event Streams API endpoint:                    https://kafka-ibm-es-admapi-external-integration.apps.eda-sandbox-delta.gse-ocp.net   
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>Event Streams API status:                      OK   
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>Event Streams UI address:                      https://kafka-ibm-es-ui-integration.apps.eda-sandbox-delta.gse-ocp.net   
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>Apicurio Registry endpoint:                    https://kafka-ibm-es-ac-reg-external-integration.apps.eda-sandbox-delta.gse-ocp.net   
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>Event Streams bootstrap address:               kafka-kafka-bootstrap-integration.apps.eda-sandbox-delta.gse-ocp.net:443   
<a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>OK
</code></pre></div> <h3 id=generate-scram-service-credentials>Generate SCRAM Service Credentials<a class=headerlink href=#generate-scram-service-credentials title="Permanent link">&para;</a></h3> <p>For an application to connect to an Event Streams instance through the secured external listener, it needs SCRAM credentials to act as service credentials to authenticate the application. We also need TLS certificate to encrypt the communication with the brokers.</p> <h4 id=ui_1>UI<a class=headerlink href=#ui_1 title="Permanent link">&para;</a></h4> <ol> <li>Log into the IBM Event Streams user interface as explained previously in this readme and click on the <code>Connect to this cluster</code> option displayed on the dashboard. This will display a menu. Make sure that you are on the <strong>External Connection</strong>.</li> </ol> <p><img alt="Connect to this Cluster" src=images/esv10-connect-to-cluster.png></p> <ol> <li>Click on the <code>Generate SCRAM credentials</code> button.</li> </ol> <p><img alt="Generate SCRAM1 " src=images/esv10-generate-scram.png></p> <ol> <li>Introduce a name for your credentials and choose the option that better suits the needs of your applications (this will create RBAC permissions for you credentials so that a service credentials can do only what it needs to do). For this demo, select <code>Produce messages, consume messages and create topics and schemas</code> last option.</li> </ol> <p><img alt="Generate SCRAM 2" src=images/esv10-scram-1.png></p> <ol> <li>Decide whether your service credentials need to have the ability to access all topics or certain topics only. For this demo, select <code>All Topics</code> and then click Next.</li> </ol> <p><img alt="Generate SCRAM 3" src=images/esv10-scram-2.png></p> <ol> <li>Decide whether your service credentials need to have the ability to access all consumer groups or certain specific consumer groups only. For this demo, select <code>All Consumer Groups</code> and click Next.</li> </ol> <p><img alt="Generate SCRAM 4" src=images/esv10-scram-3.png></p> <ol> <li>Decide whether your service credentials need to have the ability to access all transactional IDs or certain specific transactional IDs only. For this demo, select <code>All transaction IDs</code> and click on <code>Generate credentials</code>.</li> </ol> <p><img alt="Generate SCRAM 5" src=images/esv10-scram-4.png></p> <ol> <li><strong>Take note</strong> of the set of credentials displayed on screen. You will need to provide your applications with these in order to get authenticated and authorized with your IBM Event Streams instance.</li> </ol> <p><img alt="Generate SCRAM 6" src=images/esv10-scram-5.png></p> <ol> <li>If you did not take note of your SCRAM credentials or you forgot these, the above will create a <code>KafkaUser</code> object in OpenShift that is interpreted by the IBM Event Streams Operator. You can see this <code>KafkaUser</code> if you go to the OpenShift console, click on <code>Operators --&gt; Installed Operators</code> on the right hand side menu, then click on the <code>IBM Event Streams</code> operator and finally click on <code>Kafka Users</code> at the top bar menu.</li> </ol> <p><img alt="Retrieve SCRAM 1" src=images/esv10-retrieve-scram-1.png></p> <ol> <li>If you click on your <code>Kafka User</code>, you will see what is the Kubernetes secret behind holding your SCRAM credentials details.</li> </ol> <p><img alt="Retrieve SCRAM 2" src=images/esv10-retrieve-scram-2.png></p> <ol> <li>Click on that secret and you will be able to see again your <code>SCRAM password</code> (your <code>SCRAM username</code> is the same name as the <code>Kafka User</code> created or the secret holding your <code>SCRAM password</code>) </li> </ol> <p><img alt="Retrieve SCRAM 3" src=images/esv10-retrieve-scram-3.png></p> <h4 id=cli_1>CLI<a class=headerlink href=#cli_1 title="Permanent link">&para;</a></h4> <ol> <li> <p>Log into your IBM Event Streams instance through the CLI.</p> </li> <li> <p>Create your SCRAM service credentials with the following command (adjust the topics, consumer groups, transaction IDs, etc permissions your SCRAM service credentials should have in order to satisfy your application requirements):</p> </li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>$ cloudctl es kafka-user-create --name test-credentials-cli --consumer --producer --schema-topic-create --all-topics --all-groups --all-txnids --auth-type scram-sha-512
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>KafkaUser name         Authentication   Authorization   Username                                                Secret   
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>test-credentials-cli   scram-sha-512    simple          EntityOperator has not created corresponding username   EntityOperator has not created corresponding secret   
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>Resource <span class=nb>type</span>     Name        Pattern <span class=nb>type</span>   Host   Operation   
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>topic             *           literal        *      Read   
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>topic             __schema_   prefix         *      Read   
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>topic             *           literal        *      Write   
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a>topic             *           literal        *      Create   
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>topic             __schema_   prefix         *      Alter   
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>group             *           literal        *      Read   
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>transactionalId   *           literal        *      Write   
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>Created KafkaUser test-credentials-cli.
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>OK
</code></pre></div> <ol> <li>List the <code>KafkaUser</code> objects to make sure yours has been created:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>$ cloudctl es kafka-users
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>KafkaUser name                    Authentication   Authorization   
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>test-credentials                  scram-sha-512    simple   
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>test-credentials-cli              scram-sha-512    simple   
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>OK
</code></pre></div> <ol> <li>To retrieve your credentials execute the following command:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>$ cloudctl es kafka-user test-credentials-cli 
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>KafkaUser name         Authentication   Authorization   Username               Secret   
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>test-credentials-cli   scram-sha-512    simple          test-credentials-cli   test-credentials-cli   
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>Resource <span class=nb>type</span>     Name        Pattern <span class=nb>type</span>   Host   Operation   
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>topic             *           literal        *      Read   
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>topic             __schema_   prefix         *      Read   
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>topic             *           literal        *      Write   
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>topic             *           literal        *      Create   
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>topic             __schema_   prefix         *      Alter   
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>group             *           literal        *      Read   
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>transactionalId   *           literal        *      Write   
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>OK
</code></pre></div> <ol> <li>Above you can see your <code>SCRAM username</code> under <code>Username</code> and the secret holding your <code>SCRAM password</code> under <code>Secret</code>. In order to retrieve the password, execute the following command:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>$ oc get secret test-credentials-cli -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.data.password}&#39;</span> <span class=p>|</span> base64 --decode 
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>*******
</code></pre></div> <p><strong>NEXT:</strong> For more information about how to connect to your cluste, read the <a href=https://ibm.github.io/event-streams/getting-started/connecting/ >IBM Event Streams product documentation</a></p> <h3 id=get-event-streams-tls-certificates>Get Event Streams TLS Certificates<a class=headerlink href=#get-event-streams-tls-certificates title="Permanent link">&para;</a></h3> <p>In this section we are going to see how to download the TLS certificats to securely connect to our IBM Event Streams instance.</p> <h4 id=ui_2>UI<a class=headerlink href=#ui_2 title="Permanent link">&para;</a></h4> <ol> <li> <p>Log into the IBM Event Streams console user interface as explained before in this readme.</p> </li> <li> <p>Click on the <code>Connect to this cluster</code> option displayed on the dashboard. This will display a menu where you will see a <code>Certificates</code> section:</p> </li> </ol> <p><img alt="PKCS12 Truststore" src=images/esv10-pkcs12.png></p> <ol> <li>Depending on what language your application is written into, you will need a <code>PKCS12 certificate</code> or a <code>PEM certificate</code>. Click on <code>Download certificate</code> for any of the options you need. If it is the <code>PKCS12 certificate</code> bear in mind it comes with a password for the truststore. You don't need to write this down as it will display any time you click on <code>Download certificate</code> button.</li> </ol> <h4 id=cli_2>CLI<a class=headerlink href=#cli_2 title="Permanent link">&para;</a></h4> <ol> <li> <p>Log into IBM Event Streams through the CLI as already explained before in this readme.</p> </li> <li> <p>To retrieve the <code>PKCS12 certificate</code> execute the following command:</p> </li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>$ cloudctl es certificates --format p12
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>Trustore password is ********
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>Certificate successfully written to /Users/testUser/Downloads/es-cert.p12.
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>OK
</code></pre></div> <ol> <li>To retrieve the <code>PEM certificate</code> execute the following command:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>$ cloudctl es certificates --format pem
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>Certificate successfully written to /Users/testUser/Downloads/es-cert.pem.
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>OK
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../../use-cases/gitops/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Event-driven solution GitOps" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Event-driven solution GitOps </div> </div> </a> <a href=../../../use-cases/connect-s3/ class="md-footer__link md-footer__link--next" aria-label="Next: Kafka Connect - S3" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Kafka Connect - S3 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright  2022 IBM </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ibm-cloud-architecture target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/agileitarchitecture target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.tabs.sticky", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>